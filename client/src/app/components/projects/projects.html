<div class="projects-container">
  <h2>My Orders</h2>

  <div *ngIf="orders.length === 0" class="no-orders">
    <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
      <rect x="30" y="40" width="60" height="50" rx="4" stroke="#94a3b8" stroke-width="2" opacity="0.3"/>
      <path d="M45 40V30C45 26 48 23 52 23H68C72 23 75 26 75 30V40" stroke="#94a3b8" stroke-width="2" opacity="0.3"/>
      <line x1="30" y1="55" x2="90" y2="55" stroke="#94a3b8" stroke-width="2" opacity="0.3"/>
    </svg>
    <p>No orders yet</p>
  </div>

  <div class="orders-list">
    <div *ngFor="let order of orders" class="order-card">
      <div class="order-header">
        <h3>Order #{{ order.orderId }}</h3>
        <span class="status" [class.draft]="order.status === 'draft'" [class.completed]="order.status === 'completed'">
          {{ order.status === 'draft' ? 'Draft' : 'Completed' }}
        </span>
      </div>
      
      <div class="order-details">
        <p><strong>Date:</strong> {{ order.orderDate | date:'dd/MM/yyyy' }}</p>
        <p><strong>Total:</strong> ${{ order.totalAmount }}</p>
      </div>

      <div class="order-actions" *ngIf="order.dashboardCode">
        <div class="code-section">
          <p>âœ¨ Dashboard Code Generated</p>
          
          <div *ngIf="!order.codeApproved">
            <button (click)="approveCode(order.orderId!)" class="approve-btn">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M13 4L6 11L3 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Approve Code
            </button>
          </div>

          <div *ngIf="order.codeApproved && order.status === 'draft'">
            <button (click)="proceedToPayment(order.orderId!)" class="payment-btn">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M2 5h12M4 9h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
              </svg>
              Proceed to Payment
            </button>
            <button (click)="suspendOrder(order.orderId!)" class="suspend-btn">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <rect x="5" y="3" width="2" height="10" fill="currentColor"/>
                <rect x="9" y="3" width="2" height="10" fill="currentColor"/>
              </svg>
              Suspend Order
            </button>
          </div>

          <div *ngIf="order.status === 'completed'">
            <button (click)="downloadCode(order.orderId!)" class="download-btn">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M8 2V10M8 10L5 7M8 10L11 7M3 14H13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Download Code
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
